import { useState, useEffect } from 'react';
import { Button } from '@/components/ui/button';
import { RegistrationModal } from '@/components/auth/RegistrationModal';
import { LoginModal } from '@/components/auth/LoginModal';
import { supabase } from '@/integrations/supabase/client';
import { User, Session } from '@supabase/supabase-js';
import { Link, useLocation } from 'react-router-dom';
import { 
  Menu, 
  X, 
  User as UserIcon, 
  Wallet, 
  Bell, 
  Settings,
  LogIn,
  UserPlus,
  LogOut,
  ChevronDown,
  MessageCircle,
  Gamepad2
} from 'lucide-react';

const Header = () => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [isRegistrationModalOpen, setIsRegistrationModalOpen] = useState(false);
  const [isLoginModalOpen, setIsLoginModalOpen] = useState(false);
  const [isLoginDropdownOpen, setIsLoginDropdownOpen] = useState(false);
  const [user, setUser] = useState<User | null>(null);
  const [session, setSession] = useState<Session | null>(null);
  const location = useLocation();

  const navItems = [
    { 
      name: 'Spor', 
      href: '/sports-betting',
      icon: (
        <svg width="32" height="33" viewBox="0 0 32 33" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M16.0139 0.973877C7.32589 0.973877 0.282715 8.01706 0.282715 16.705C0.282715 25.393 7.32589 32.4362 16.0139 32.4362C24.7019 32.4362 31.7451 25.393 31.7451 16.705C31.7353 8.02115 24.6978 0.983607 16.0139 0.973877ZM16.5754 5.50913L22.0442 3.32305C22.6648 3.60393 23.2652 3.92757 23.8411 4.29166L23.8554 4.30062C24.4213 4.65908 24.962 5.05569 25.4741 5.48763L25.5181 5.52603C25.7478 5.72165 25.9711 5.92418 26.1882 6.13311C26.2156 6.15999 26.2443 6.18559 26.2717 6.21299C26.4993 6.43523 26.7197 6.66439 26.933 6.90021C26.9507 6.92018 26.9676 6.94117 26.9852 6.96114C27.1724 7.17084 27.3524 7.38796 27.527 7.60867C27.569 7.66116 27.611 7.71365 27.6517 7.76614C27.8412 8.01142 28.0245 8.26106 28.1976 8.51864L27.1074 13.153L21.7436 14.9412L16.5767 10.8069L16.5754 5.50913ZM4.37553 7.76921C4.41624 7.71672 4.45772 7.66423 4.49971 7.612C4.67228 7.39308 4.85075 7.17955 5.03509 6.97113C5.05507 6.94911 5.0735 6.92658 5.09322 6.90456C5.30522 6.66823 5.52465 6.43933 5.75201 6.2176C5.77813 6.192 5.80424 6.16511 5.83164 6.14156C6.04697 5.93391 6.26845 5.73266 6.49607 5.53807L6.54855 5.49403C7.05603 5.06516 7.59167 4.67111 8.15188 4.31419L8.17237 4.30113C8.74487 3.93781 9.34145 3.61469 9.95851 3.33355L15.4524 5.50913V10.8053L10.2852 14.9389L4.92141 13.154L3.83119 8.51967C4.00581 8.2626 4.18709 8.01347 4.37553 7.76921ZM3.74362 24.7516C3.58949 24.5166 3.44201 24.2772 3.30144 24.0332L3.26739 23.9743C3.12759 23.7316 2.99521 23.4848 2.87052 23.2341L2.86617 23.2262C2.60347 22.6987 2.37278 22.1559 2.17563 21.6006V21.5954C2.08243 21.3332 1.99742 21.0647 1.91882 20.7945L1.8904 20.6949C1.81845 20.4412 1.75316 20.1846 1.69478 19.9253C1.68966 19.8999 1.68326 19.8759 1.67814 19.8508C1.54935 19.2649 1.45692 18.672 1.4011 18.0746L4.60239 14.2332L9.92907 16.0086L11.475 22.192L8.93486 25.5718L3.74362 24.7516ZM19.5058 30.9642C19.2436 31.0293 18.9745 31.0853 18.7054 31.1358C18.6677 31.1432 18.6293 31.1494 18.5917 31.1563C18.3625 31.1972 18.1308 31.2323 17.8986 31.261C17.8366 31.2689 17.7752 31.2774 17.7135 31.2848C17.4979 31.3099 17.2803 31.3288 17.0621 31.3445C16.9935 31.3491 16.9256 31.356 16.857 31.3603C16.5782 31.3775 16.2971 31.3875 16.0139 31.3875C15.7545 31.3875 15.4967 31.3806 15.2404 31.367C15.2094 31.367 15.1797 31.3619 15.1487 31.3596C14.9206 31.3465 14.6935 31.3293 14.4669 31.3073L14.4408 31.3025C13.9443 31.2487 13.4507 31.1698 12.9621 31.0667L9.86045 26.2103L12.3607 22.8764H19.6671L22.2083 26.2323L19.5058 30.9642ZM30.3535 19.8513C30.3481 19.8764 30.3419 19.9007 30.3366 19.9258C30.2779 20.1849 30.2126 20.4415 30.141 20.6954L30.1128 20.795C30.0339 21.0652 29.9492 21.3327 29.8557 21.5959V21.6011C29.6586 22.1564 29.4281 22.6992 29.1652 23.2267L29.1608 23.2346C29.0354 23.4855 28.9033 23.7324 28.764 23.9748L28.7299 24.0337C28.5901 24.2785 28.4429 24.5174 28.2885 24.7511L23.1149 25.5669L20.5571 22.19L22.1023 16.0081L27.429 14.2327L30.6302 18.0741C30.5747 18.6717 30.4823 19.2652 30.3535 19.8513Z" fill="#fff"/>
        </svg>
      )
    },
    { 
      name: 'CANLI BAHİS', 
      href: '/live-betting',
      icon: (
        <svg width="30" height="23" viewBox="0 0 30 23" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M15.0177 15.7521C16.1229 15.7521 17.2281 15.3322 18.0696 14.4922C18.8857 13.6779 19.3349 12.5948 19.3349 11.4425C19.3349 10.2902 18.8857 9.20714 18.0696 8.39283C16.3866 6.71313 13.6485 6.71313 11.9655 8.39283C11.1494 9.20714 10.7002 10.2902 10.7002 11.4425C10.7002 12.5948 11.1494 13.6779 11.9655 14.4922C12.807 15.3322 13.9122 15.7521 15.0177 15.7521ZM13.9306 10.3616C14.2306 10.0624 14.624 9.91314 15.0177 9.91314C15.4111 9.91314 15.8045 10.0627 16.1041 10.3616C16.3935 10.6503 16.5529 11.0343 16.5529 11.4425C16.5529 11.8508 16.3935 12.2344 16.1044 12.5234C15.5049 13.1215 14.5301 13.1211 13.9306 12.5234C13.6412 12.2344 13.4822 11.8508 13.4822 11.4425C13.4822 11.0343 13.6416 10.6507 13.9306 10.3616Z" fill="#151211"/>
          <path d="M20.1001 17.5252C20.3718 17.7976 20.7283 17.9338 21.0847 17.9338C21.4404 17.9338 21.7958 17.7983 22.0675 17.5274C23.6957 15.902 24.5926 13.7413 24.5926 11.4425C24.5926 9.14376 23.6957 6.98265 22.0675 5.35765C21.5237 4.81502 20.6428 4.81574 20.1001 5.35946C19.5575 5.90318 19.5586 6.78414 20.1023 7.32677C21.2039 8.42617 21.8106 9.8878 21.8106 11.4425C21.8106 12.9969 21.2039 14.4589 20.1023 15.5583C19.5586 16.1009 19.5575 16.9815 20.1001 17.5252Z" fill="#151211"/>
          <path d="M7.96022 17.5273C8.2319 17.7983 8.58725 17.9338 8.94297 17.9338C9.29941 17.9338 9.65586 17.7976 9.92753 17.5252C10.4702 16.9815 10.4691 16.1009 9.92536 15.5582C8.82379 14.4585 8.21705 12.9968 8.21705 11.4421C8.21705 9.88775 8.82379 8.42612 9.92536 7.32636C10.4691 6.78373 10.4702 5.90313 9.92753 5.35941C9.3849 4.81533 8.50394 4.8146 7.96022 5.35724C6.33196 6.9826 5.43542 9.14335 5.43506 11.4421C5.43506 13.7409 6.33196 15.902 7.96022 17.5273Z" fill="#151211"/>
          <path d="M26.6567 11.4425C26.6567 14.544 25.4465 17.4604 23.2488 19.6537C22.7051 20.1964 22.704 21.0773 23.2466 21.621C23.5187 21.8931 23.8747 22.0293 24.2312 22.0293C24.5869 22.0293 24.9423 21.8938 25.2139 21.6229C27.9383 18.9039 29.4387 15.2884 29.4387 11.4425C29.4387 7.59701 27.9383 3.98115 25.2139 1.26219C24.6702 0.719557 23.7896 0.720282 23.2466 1.264C22.704 1.80772 22.7051 2.68868 23.2488 3.23132C25.4465 5.42467 26.6567 8.34068 26.6567 11.4425Z" fill="#151211"/>
          <path d="M5.7964 22.0292C6.15284 22.0292 6.50928 21.893 6.78096 21.621C7.3236 21.0773 7.32287 20.1963 6.77879 19.6537C4.58109 17.4603 3.37085 14.544 3.37085 11.4421C3.37085 8.34063 4.58109 5.42425 6.77879 3.2309C7.32251 2.68827 7.3236 1.80731 6.78096 1.26395C6.23797 0.71987 5.35737 0.719146 4.81365 1.26178C2.08926 3.9811 0.588867 7.5966 0.588867 11.4421C0.588867 15.288 2.08926 18.9035 4.81365 21.6228C5.08533 21.8938 5.44068 22.0292 5.7964 22.0292Z" fill="#151211"/>
        </svg>
      )
    },
    { 
      name: 'CASİNO', 
      href: '/casino',
      icon: (
        <svg width="23" height="26" viewBox="0 0 23 26" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M15.5478 1.31444C15.8004 1.06182 16.126 0.89506 16.4787 0.837785C16.8314 0.780496 17.1932 0.835645 17.5128 0.995417L17.5167 0.997359L17.5167 0.99737L17.5211 0.99964C17.5909 1.03495 18.1139 1.2997 18.7559 1.68852C19.4028 2.08028 20.2216 2.62819 20.8124 3.21903M15.5478 1.31444L17.1815 1.66834C17.3108 1.73378 19.2458 2.71308 20.2821 3.74936C20.3705 3.83779 20.4407 3.94279 20.4885 4.05834M15.5478 1.31444C15.0852 1.77686 14.7604 2.09371 14.288 2.32403C13.8224 2.55107 13.15 2.72043 11.9896 2.72043C11.3055 2.72043 10.6295 2.44711 9.73059 2.06864C9.73057 2.06863 9.73055 2.06862 9.73053 2.06861L9.69774 2.0548C8.54038 1.56727 7.02413 0.928561 5.12058 1.172V0.815674H4.37058H2.46582H1.71582V1.56567V9.1847V9.9347H2.46582H4.37058H5.12058V9.1847V7.2996C5.40085 7.19666 5.64937 7.18623 5.91142 7.22614C6.3402 7.29145 6.81383 7.48991 7.53601 7.80128L7.53602 7.80128L7.57191 7.81676C8.45002 8.19541 9.51859 8.65618 10.8104 8.80816C8.58705 12.2186 7.51277 15.4123 6.99484 17.7419C6.69301 19.0652 6.51329 20.4129 6.45768 21.768H6.27533H5.52533V22.518V24.4227V25.1727H6.27533H16.7515H17.5015V24.4227V22.518V21.768H16.7515H16.0774C14.1013 14.8404 18.0005 8.4385 20.8124 5.62659C20.9705 5.46851 21.0959 5.28084 21.1814 5.0743L20.4885 4.78728M15.5478 1.31444L20.4885 4.78728M20.8124 3.21903L20.2831 3.74829L20.8124 3.21901C20.8124 3.21902 20.8124 3.21902 20.8124 3.21903ZM20.8124 3.21903C20.9705 3.37711 21.0959 3.56477 21.1814 3.77131L20.4885 4.05834M20.4885 4.05834L21.1814 3.77132C21.267 3.97786 21.311 4.19923 21.311 4.42281C21.311 4.64638 21.267 4.86775 21.1814 5.07429L20.4885 4.78728M20.4885 4.05834V4.78728" stroke="#fff" strokeWidth="1.5"/>
        </svg>
      )
    },
    { 
      name: 'Canlı Destek', 
      href: '#',
      icon: (
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fillRule="evenodd" clipRule="evenodd" d="M16.5613 21.1775C20.9265 19.5318 24 15.5949 24 11C24 4.92487 18.6274 0 12 0C5.37258 0 0 4.92487 0 11C0 13.528 0.930271 15.8567 2.49412 17.7144C6.79478 23.2994 15.0454 24.1036 19.5 23.5C19.789 23.4608 19.7898 23.1361 19.5 23L19.3494 22.9294C18.3482 22.4602 17.3141 21.9756 16.5613 21.1775ZM7 12C7.55228 12 8 11.5523 8 11C8 10.4477 7.55228 10 7 10C6.44772 10 6 10.4477 6 11C6 11.5523 6.44772 12 7 12ZM13 11C13 11.5523 12.5523 12 12 12C11.4477 12 11 11.5523 11 11C11 10.4477 11.4477 10 12 10C12.5523 10 13 10.4477 13 11ZM17 12C17.5523 12 18 11.5523 18 11C18 10.4477 17.5523 10 17 10C16.4477 10 16 10.4477 16 11C16 11.5523 16.4477 12 17 12Z" fill="#0ABB46"/>
        </svg>
      ),
      onClick: () => {
        // Tawk.to or live chat integration
        console.log('Open live chat');
      }
    },
    { 
      name: 'Canlı Casino', 
      href: '/live-casino',
      icon: (
        <svg width="29" height="22" viewBox="0 0 29 22" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9.36108 0.262919L3.30975 5.30542C2.99092 5.57248 2.85202 5.99781 2.95178 6.40157L4.29471 11.7749C0.459544 13.1537 0.140625 17.1711 0.140625 18.4147V25.0014C0.140625 29.0231 3.87165 31.5463 10.9307 32.2997C12.2197 32.4405 13.5153 32.5129 14.812 32.5166C17.393 32.5897 19.9644 32.1721 22.3896 31.286C24.0314 30.6286 25.103 29.0327 25.0901 27.2642V22.8042C25.0874 21.3333 23.7472 19.7219 20.8281 19.5255L19.0746 16.018C25.646 14.259 28.6546 10.2324 28.7832 10.0556C28.9031 9.89058 28.9203 9.67223 28.8277 9.49046C28.7351 9.30869 28.5484 9.19426 28.3444 9.19428H25.7155L26.1694 6.01702C26.2047 5.7688 26.0653 5.52874 25.8321 5.43643C25.599 5.34412 25.333 5.4236 25.1888 5.62868C23.9545 7.43634 22.1323 8.76068 20.0319 9.37652L19.1689 2.46878C19.1103 2.00083 18.756 1.6244 18.2924 1.53751L10.2549 0.0280682C9.93681 -0.032172 9.60849 0.0540918 9.36108 0.262919ZM4.12712 6.6272L11.6326 8.03739L12.9343 13.248L9.16582 13.0126C8.77994 12.9916 8.41126 13.1744 8.19442 13.4943L7.56201 14.4424L6.00646 14.15L4.12712 6.6272ZM10.2354 24.5371C9.26747 24.4123 8.30764 24.2312 7.36078 23.9947L5.11479 20.0619L8.78128 14.5622L12.521 21.1049L10.2354 24.5371ZM13.4354 21.6885L20.2765 22.1452L18.5029 24.5827C16.165 24.8999 13.7971 24.9298 11.452 24.6716L13.4354 21.6885ZM4.17539 20.6038L5.85405 23.5429C4.76117 23.1838 3.74463 22.6245 2.85632 21.8936C2.64264 20.7744 2.98657 19.6213 3.77837 18.802C4.17776 18.3892 4.68013 18.0906 5.23357 17.9369L4.21444 19.4659C3.98639 19.8063 3.97105 20.2466 4.17485 20.6022L4.17539 20.6038ZM4.55885 12.8282L4.95425 14.4103C5.05704 14.8212 5.38957 15.1347 5.80578 15.2131L6.90735 15.4203L6.02436 16.7453C4.88831 16.7508 3.80234 17.2136 3.01144 18.0291C2.32244 18.7144 1.88612 19.613 1.77373 20.5783C1.40638 19.9169 1.21741 19.1713 1.22538 18.4147C1.22538 17.369 1.48085 14.016 4.55885 12.8282ZM24.0053 27.2642C24.016 28.5879 23.215 29.7832 21.9866 30.2766C20.0883 31.0359 16.6463 31.8164 11.0452 31.2198C6.56566 30.7425 1.22538 29.2764 1.22538 25.0014V21.7433C2.80317 23.8434 6.08131 25.1956 10.934 25.7119C18.5078 26.5201 22.3907 24.9021 24.0053 23.8928V27.2642ZM21.6308 21.1315L21.403 20.6754C23.2151 20.9688 23.8627 21.9229 23.9815 22.5818C22.8122 23.4218 21.4762 24.0011 20.0639 24.2806L21.538 22.2548C21.7776 21.9276 21.8135 21.4936 21.6308 21.1315ZM20.3833 21.0659L13.4832 20.6049L9.78848 14.1375L17.1513 14.5975L20.3833 21.0659ZM19.8599 11.3931C20.0963 11.1551 20.2101 10.8217 20.1685 10.4889L20.1653 10.464C21.9299 9.98437 23.5369 9.04804 24.8243 7.74939L24.5531 9.65965C24.5308 9.81535 24.5772 9.97308 24.6802 10.0919C24.7832 10.2108 24.9328 10.2791 25.0901 10.279H27.1387C24.7637 12.6013 21.8082 14.2425 18.5815 15.0308L18.1216 14.1088C18.0127 13.8986 17.8378 13.7299 17.6237 13.6288L19.8599 11.3931ZM19.0946 10.6262L16.2656 13.4552L14.0695 13.3164L12.6815 7.7662L18.1666 3.19557L19.0946 10.6262ZM11.9222 6.9868L4.62936 5.61783L10.0532 1.09656L17.3482 2.4639L11.9222 6.9868Z" fill="#fff"/>
          <path d="M16.9545 7.02482C17.254 7.02482 17.4969 6.78199 17.4969 6.48244C17.4969 6.1829 17.254 5.94006 16.9545 5.94006C16.6549 5.94006 16.4121 6.1829 16.4121 6.48244C16.4121 6.78199 16.6549 7.02482 16.9545 7.02482Z" fill="#fff"/>
          <path d="M15.3275 12.4487C15.6271 12.4487 15.8699 12.2058 15.8699 11.9063C15.8699 11.6067 15.6271 11.3639 15.3275 11.3639C15.028 11.3639 14.7852 11.6067 14.7852 11.9063C14.7852 12.2058 15.028 12.4487 15.3275 12.4487Z" fill="#fff"/>
          <path d="M16.412 16.2453C16.7116 16.2453 16.9544 16.0024 16.9544 15.7029C16.9544 15.4034 16.7116 15.1605 16.412 15.1605C16.1125 15.1605 15.8696 15.4034 15.8696 15.7029C15.8696 16.0024 16.1125 16.2453 16.412 16.2453Z" fill="#fff"/>
          <path d="M18.039 20.0419C18.3385 20.0419 18.5813 19.7991 18.5813 19.4995C18.5813 19.2 18.3385 18.9572 18.039 18.9572C17.7394 18.9572 17.4966 19.2 17.4966 19.4995C17.4966 19.7991 17.7394 20.0419 18.039 20.0419Z" fill="#fff"/>
          <path d="M14.7851 20.0419C15.0846 20.0419 15.3274 19.7991 15.3274 19.4995C15.3274 19.2 15.0846 18.9572 14.7851 18.9572C14.4855 18.9572 14.2427 19.2 14.2427 19.4995C14.2427 19.7991 14.4855 20.0419 14.7851 20.0419Z" fill="#fff"/>
          <path d="M17.4965 23.8385C17.796 23.8385 18.0389 23.5957 18.0389 23.2962C18.0389 22.9966 17.796 22.7538 17.4965 22.7538C17.1969 22.7538 16.9541 22.9966 16.9541 23.2962C16.9541 23.5957 17.1969 23.8385 17.4965 23.8385Z" fill="#fff"/>
          <path d="M8.81875 17.8723C9.1183 17.8723 9.36113 17.6295 9.36113 17.33C9.36113 17.0304 9.1183 16.7876 8.81875 16.7876C8.5192 16.7876 8.27637 17.0304 8.27637 17.33C8.27637 17.6295 8.5192 17.8723 8.81875 17.8723Z" fill="#fff"/>
          <path d="M8.81875 20.5843C9.1183 20.5843 9.36113 20.3414 9.36113 20.0419C9.36113 19.7423 9.1183 19.4995 8.81875 19.4995C8.5192 19.4995 8.27637 19.7423 8.27637 20.0419C8.27637 20.3414 8.5192 20.5843 8.81875 20.5843Z" fill="#fff"/>
          <path d="M8.81875 23.2962C9.1183 23.2962 9.36113 23.0533 9.36113 22.7538C9.36113 22.4543 9.1183 22.2114 8.81875 22.2114C8.5192 22.2114 8.27637 22.4543 8.27637 22.7538C8.27637 23.0533 8.5192 23.2962 8.81875 23.2962Z" fill="#fff"/>
          <path d="M12.6156 16.2453C12.9152 16.2453 13.158 16.0024 13.158 15.7029C13.158 15.4034 12.9152 15.1605 12.6156 15.1605C12.3161 15.1605 12.0732 15.4034 12.0732 15.7029C12.0732 16.0024 12.3161 16.2453 12.6156 16.2453Z" fill="#fff"/>
          <path d="M14.2426 3.77055C14.5421 3.77055 14.7849 3.52772 14.7849 3.22817C14.7849 2.92862 14.5421 2.68579 14.2426 2.68579C13.943 2.68579 13.7002 2.92862 13.7002 3.22817C13.7002 3.52772 13.943 3.77055 14.2426 3.77055Z" fill="#fff"/>
          <path d="M10.4457 3.22819C10.7452 3.22819 10.9881 2.98536 10.9881 2.68581C10.9881 2.38626 10.7452 2.14343 10.4457 2.14343C10.1462 2.14343 9.90332 2.38626 9.90332 2.68581C9.90332 2.98536 10.1462 3.22819 10.4457 3.22819Z" fill="#fff"/>
          <path d="M11.5307 5.94011C11.8302 5.94011 12.073 5.69728 12.073 5.39773C12.073 5.09818 11.8302 4.85535 11.5307 4.85535C11.2311 4.85535 10.9883 5.09818 10.9883 5.39773C10.9883 5.69728 11.2311 5.94011 11.5307 5.94011Z" fill="#fff"/>
          <path d="M7.73379 5.39763C8.03334 5.39763 8.27617 5.15479 8.27617 4.85525C8.27617 4.5557 8.03334 4.31287 7.73379 4.31287C7.43424 4.31287 7.19141 4.5557 7.19141 4.85525C7.19141 5.15479 7.43424 5.39763 7.73379 5.39763Z" fill="#fff"/>
          <path d="M6.10683 9.19438C6.40638 9.19438 6.64921 8.95155 6.64921 8.652C6.64921 8.35245 6.40638 8.10962 6.10683 8.10962C5.80729 8.10962 5.56445 8.35245 5.56445 8.652C5.56445 8.95155 5.80729 9.19438 6.10683 9.19438Z" fill="#fff"/>
          <path d="M8.27627 11.3638C8.57582 11.3638 8.81865 11.121 8.81865 10.8214C8.81865 10.5219 8.57582 10.2791 8.27627 10.2791C7.97672 10.2791 7.73389 10.5219 7.73389 10.8214C7.73389 11.121 7.97672 11.3638 8.27627 11.3638Z" fill="#fff"/>
        </svg>
      )
    },
    { 
      name: 'Bonuslar', 
      href: '/promotions',
      icon: (
        <svg width="30" height="23" viewBox="0 0 30 23" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M15.0177 15.7521C16.1229 15.7521 17.2281 15.3322 18.0696 14.4922C18.8857 13.6779 19.3349 12.5948 19.3349 11.4425C19.3349 10.2902 18.8857 9.20714 18.0696 8.39283C16.3866 6.71313 13.6485 6.71313 11.9655 8.39283C11.1494 9.20714 10.7002 10.2902 10.7002 11.4425C10.7002 12.5948 11.1494 13.6779 11.9655 14.4922C12.807 15.3322 13.9122 15.7521 15.0177 15.7521ZM13.9306 10.3616C14.2306 10.0624 14.624 9.91314 15.0177 9.91314C15.4111 9.91314 15.8045 10.0627 16.1041 10.3616C16.3935 10.6503 16.5529 11.0343 16.5529 11.4425C16.5529 11.8508 16.3935 12.2344 16.1044 12.5234C15.5049 13.1215 14.5301 13.1211 13.9306 12.5234C13.6412 12.2344 13.4822 11.8508 13.4822 11.4425C13.4822 11.0343 13.6416 10.6507 13.9306 10.3616Z" fill="#151211"/>
          <path d="M20.1001 17.5252C20.3718 17.7976 20.7283 17.9338 21.0847 17.9338C21.4404 17.9338 21.7958 17.7983 22.0675 17.5274C23.6957 15.902 24.5926 13.7413 24.5926 11.4425C24.5926 9.14376 23.6957 6.98265 22.0675 5.35765C21.5237 4.81502 20.6428 4.81574 20.1001 5.35946C19.5575 5.90318 19.5586 6.78414 20.1023 7.32677C21.2039 8.42617 21.8106 9.8878 21.8106 11.4425C21.8106 12.9969 21.2039 14.4589 20.1023 15.5583C19.5586 16.1009 19.5575 16.9815 20.1001 17.5252Z" fill="#151211"/>
          <path d="M7.96022 17.5273C8.2319 17.7983 8.58725 17.9338 8.94297 17.9338C9.29941 17.9338 9.65586 17.7976 9.92753 17.5252C10.4702 16.9815 10.4691 16.1009 9.92536 15.5582C8.82379 14.4585 8.21705 12.9968 8.21705 11.4421C8.21705 9.88775 8.82379 8.42612 9.92536 7.32636C10.4691 6.78373 10.4702 5.90313 9.92753 5.35941C9.3849 4.81533 8.50394 4.8146 7.96022 5.35724C6.33196 6.9826 5.43542 9.14335 5.43506 11.4421C5.43506 13.7409 6.33196 15.902 7.96022 17.5273Z" fill="#151211"/>
          <path d="M26.6567 11.4425C26.6567 14.544 25.4465 17.4604 23.2488 19.6537C22.7051 20.1964 22.704 21.0773 23.2466 21.621C23.5187 21.8931 23.8747 22.0293 24.2312 22.0293C24.5869 22.0293 24.9423 21.8938 25.2139 21.6229C27.9383 18.9039 29.4387 15.2884 29.4387 11.4425C29.4387 7.59701 27.9383 3.98115 25.2139 1.26219C24.6702 0.719557 23.7896 0.720282 23.2466 1.264C22.704 1.80772 22.7051 2.68868 23.2488 3.23132C25.4465 5.42467 26.6567 8.34068 26.6567 11.4425Z" fill="#151211"/>
          <path d="M5.7964 22.0292C6.15284 22.0292 6.50928 21.893 6.78096 21.621C7.3236 21.0773 7.32287 20.1963 6.77879 19.6537C4.58109 17.4603 3.37085 14.544 3.37085 11.4421C3.37085 8.34063 4.58109 5.42425 6.77879 3.2309C7.32251 2.68827 7.3236 1.80731 6.78096 1.26395C6.23797 0.71987 5.35737 0.719146 4.81365 1.26178C2.08926 3.9811 0.588867 7.5966 0.588867 11.4421C0.588867 15.288 2.08926 18.9035 4.81365 21.6228C5.08533 21.8938 5.44068 22.0292 5.7964 22.0292Z" fill="#151211"/>
        </svg>
      )
    },
    { 
      name: 'VIP PROGRAMI', 
      href: '/vip',
      icon: (
        <svg width="30" height="23" viewBox="0 0 30 23" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M15.0177 15.7521C16.1229 15.7521 17.2281 15.3322 18.0696 14.4922C18.8857 13.6779 19.3349 12.5948 19.3349 11.4425C19.3349 10.2902 18.8857 9.20714 18.0696 8.39283C16.3866 6.71313 13.6485 6.71313 11.9655 8.39283C11.1494 9.20714 10.7002 10.2902 10.7002 11.4425C10.7002 12.5948 11.1494 13.6779 11.9655 14.4922C12.807 15.3322 13.9122 15.7521 15.0177 15.7521ZM13.9306 10.3616C14.2306 10.0624 14.624 9.91314 15.0177 9.91314C15.4111 9.91314 15.8045 10.0627 16.1041 10.3616C16.3935 10.6503 16.5529 11.0343 16.5529 11.4425C16.5529 11.8508 16.3935 12.2344 16.1044 12.5234C15.5049 13.1215 14.5301 13.1211 13.9306 12.5234C13.6412 12.2344 13.4822 11.8508 13.4822 11.4425C13.4822 11.0343 13.6416 10.6507 13.9306 10.3616Z" fill="#151211"/>
          <path d="M20.1001 17.5252C20.3718 17.7976 20.7283 17.9338 21.0847 17.9338C21.4404 17.9338 21.7958 17.7983 22.0675 17.5274C23.6957 15.902 24.5926 13.7413 24.5926 11.4425C24.5926 9.14376 23.6957 6.98265 22.0675 5.35765C21.5237 4.81502 20.6428 4.81574 20.1001 5.35946C19.5575 5.90318 19.5586 6.78414 20.1023 7.32677C21.2039 8.42617 21.8106 9.8878 21.8106 11.4425C21.8106 12.9969 21.2039 14.4589 20.1023 15.5583C19.5586 16.1009 19.5575 16.9815 20.1001 17.5252Z" fill="#151211"/>
          <path d="M7.96022 17.5273C8.2319 17.7983 8.58725 17.9338 8.94297 17.9338C9.29941 17.9338 9.65586 17.7976 9.92753 17.5252C10.4702 16.9815 10.4691 16.1009 9.92536 15.5582C8.82379 14.4585 8.21705 12.9968 8.21705 11.4421C8.21705 9.88775 8.82379 8.42612 9.92536 7.32636C10.4691 6.78373 10.4702 5.90313 9.92753 5.35941C9.3849 4.81533 8.50394 4.8146 7.96022 5.35724C6.33196 6.9826 5.43542 9.14335 5.43506 11.4421C5.43506 13.7409 6.33196 15.902 7.96022 17.5273Z" fill="#151211"/>
          <path d="M26.6567 11.4425C26.6567 14.544 25.4465 17.4604 23.2488 19.6537C22.7051 20.1964 22.704 21.0773 23.2466 21.621C23.5187 21.8931 23.8747 22.0293 24.2312 22.0293C24.5869 22.0293 24.9423 21.8938 25.2139 21.6229C27.9383 18.9039 29.4387 15.2884 29.4387 11.4425C29.4387 7.59701 27.9383 3.98115 25.2139 1.26219C24.6702 0.719557 23.7896 0.720282 23.2466 1.264C22.704 1.80772 22.7051 2.68868 23.2488 3.23132C25.4465 5.42467 26.6567 8.34068 26.6567 11.4425Z" fill="#151211"/>
          <path d="M5.7964 22.0292C6.15284 22.0292 6.50928 21.893 6.78096 21.621C7.3236 21.0773 7.32287 20.1963 6.77879 19.6537C4.58109 17.4603 3.37085 14.544 3.37085 11.4421C3.37085 8.34063 4.58109 5.42425 6.77879 3.2309C7.32251 2.68827 7.3236 1.80731 6.78096 1.26395C6.23797 0.71987 5.35737 0.719146 4.81365 1.26178C2.08926 3.9811 0.588867 7.5966 0.588867 11.4421C0.588867 15.288 2.08926 18.9035 4.81365 21.6228C5.08533 21.8938 5.44068 22.0292 5.7964 22.0292Z" fill="#151211"/>
        </svg>
      )
    }
  ];

  // Authentication state management
  useEffect(() => {
    // Set up auth state listener FIRST
    const { data: { subscription } } = supabase.auth.onAuthStateChange(
      (event, session) => {
        setSession(session);
        setUser(session?.user ?? null);
      }
    );

    // THEN check for existing session
    supabase.auth.getSession().then(({ data: { session } }) => {
      setSession(session);
      setUser(session?.user ?? null);
    });

    return () => subscription.unsubscribe();
  }, []);

  const handleLogout = async () => {
    try {
      await supabase.auth.signOut();
      setIsMenuOpen(false);
    } catch (error) {
      console.error('Logout error:', error);
    }
  };

  const handleLoginSuccess = () => {
    setIsLoginModalOpen(false);
  };

  return (
    <div className="min-h-screen bg-background">
      {/* Header with Logo and Main Navigation */}
      <header className="bg-slate-900 border-b border-border">
        {/* Main Header Row */}
        <div className="container mx-auto px-4">
          <div className="flex items-center justify-between h-16">
            {/* Logo Section */}
            <div className="flex items-center">
              <Link to="/" className="text-white hover:text-orange-400 transition-colors">
                <svg width="137" height="40" viewBox="0 0 137 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <g clipPath="url(#clip0_9_34)">
                    <path d="M72.373 31.4694C72.5643 32.5785 73.076 34.551 74.6511 36.343C77.7149 39.8288 82.4156 39.916 83.8831 39.9432C83.8831 39.9432 86.9704 40.0978 91.231 38.4153C94.2592 37.2192 96.3836 35.5517 97.6713 34.5029C98.9923 33.4274 99.9902 32.4099 100.677 31.6517C100.79 31.5347 100.846 31.3815 100.78 31.3078C100.687 31.205 100.294 31.3911 100.18 31.4444C97.2845 32.8033 94.3726 34.1519 91.3506 35.224C89.3992 35.9163 86.857 36.7609 83.796 36.8662C81.9788 36.9286 80.7274 36.9524 78.8303 36.2933C75.9478 35.292 74.8298 33.958 74.0344 33.1107C73.4159 32.4286 72.9889 31.7878 72.7114 31.3213C72.6583 31.2571 72.5693 31.2332 72.4929 31.2611C72.4087 31.292 72.3571 31.3795 72.373 31.4694Z" fill="#FDAB0F"/>
                    <path d="M0.2555 17.9918C1.20765 12.6822 4.8802 9.56662 9.91293 9.56662C15.399 9.56662 18.0742 12.375 16.9861 17.6409L16.8952 18.0797H11.4545C11.8624 15.6663 11.3185 14.4377 9.82217 14.4377C8.23534 14.4377 6.82977 16.0172 6.33092 18.5186C5.7415 21.9853 7.73649 23.7406 11.6811 23.7406C13.3587 23.7406 14.8096 23.6089 16.0791 23.3456L15.0362 28.0411C13.8121 28.4359 12.1345 28.6115 10.0035 28.6115C2.70392 28.6112 -1.01407 25.0129 0.2555 17.9918Z" fill="white"/>
                    <path d="M37.1987 10.8874L34.0485 28.5423C33.6042 28.5709 32.2102 28.5447 31.452 28.3313C30.8996 28.1761 30.082 27.6687 29.7826 27.2626C28.0894 28.1114 26.281 28.3918 24.8302 28.3918C20.6582 28.3918 18.4236 25.8517 18.435 21.7005C18.4376 20.7941 18.0641 16.0825 21.5572 12.4532C22.0475 11.9438 22.6387 11.4284 23.3812 10.9756C26.7973 8.89193 30.7783 9.53013 33.4568 9.96654C34.3645 10.1146 35.6654 10.3796 37.1987 10.8874ZM30.9964 14.5688C30.7948 14.3674 29.7567 14.1023 29.0311 14.1023C26.7642 14.1023 25.1031 15.5743 24.4081 18.7921C24.1963 19.7871 23.3465 23.7804 26.6854 24.0455C27.4685 24.1076 28.4231 24.1671 29.3909 23.5815L30.9964 14.5688Z" fill="white"/>
                    <path d="M45.7322 21.6341C41.5155 20.7563 39.7473 19.3084 40.518 14.964C41.1982 11.3657 43.9641 9.56662 48.8155 9.56662C50.9918 9.56662 52.8507 9.87381 54.347 10.5321L54.0749 15.2712C52.5787 14.4375 50.6743 13.9987 48.3622 13.9987C46.9566 13.9987 46.2312 14.3059 46.1405 14.9641C45.9591 15.7103 46.639 15.9734 47.954 16.3245C52.4426 17.2461 53.9841 19.0452 53.1229 23.258C52.4881 26.8123 49.8582 28.6113 45.2336 28.6113C42.5586 28.6113 40.4276 28.3043 38.7498 27.6461L38.9311 22.9507C40.6542 23.7846 42.7851 24.1794 45.3242 24.1794C46.775 24.1794 47.5459 23.8284 47.6819 23.0823C47.8178 22.3363 47.2284 21.9412 45.7322 21.6341Z" fill="white"/>
                    <path d="M64.8658 9.96149L61.5559 28.1724H55.6617L58.9715 9.96149H64.8658ZM63.551 0.0881958C65.546 0.0881958 66.7249 1.22912 66.362 3.37936C66.0447 5.31016 64.639 6.53888 62.5989 6.53888C60.6038 6.53888 59.4249 5.354 59.7876 3.20377C60.1049 1.31692 61.5105 0.0881958 63.551 0.0881958Z" fill="white"/>
                    <path d="M70.9339 1.18516L77.0095 0.0881958L75.2026 10.1372C76.2909 9.7422 77.4243 9.56669 78.6033 9.56669C83.6812 9.56669 86.3564 12.9895 85.132 19.7911C84.0893 25.452 80.1447 28.6112 74.4772 28.6112C71.8476 28.6112 69.0817 28.1724 66.1798 27.3387L70.9339 1.18516ZM72.7995 23.3456C73.3437 23.6088 73.933 23.7403 74.568 23.7403C76.971 23.7403 78.4672 22.1606 79.0114 19.0011C79.5556 15.9295 78.6939 14.3936 76.4722 14.3936C75.5201 14.3936 74.7947 14.5254 74.3414 14.7885L72.7995 23.3456Z" fill="#FDAB0F"/>
                    <path d="M97.6912 9.56662C103.993 9.56662 107.213 13.6037 106.079 19.9225C105.127 25.1886 101.183 28.6112 95.878 28.6112C89.5301 28.6112 86.2657 24.574 87.4896 18.2553C88.5323 12.9893 92.2958 9.56662 97.6912 9.56662ZM95.9236 23.7404C97.9631 23.7404 99.4153 21.7657 99.9133 19.0889C100.458 16.3244 99.6406 14.4375 97.6457 14.4375C95.6518 14.4375 94.1546 16.2804 93.6566 19.0889C93.1577 21.9412 93.9737 23.7404 95.9236 23.7404Z" fill="#FDAB0F" className="frame-start"/>
                    <path d="M88.9901 14.3538C89.0023 14.3317 89.0216 14.3141 89.0452 14.3036C89.0687 14.2931 89.0951 14.2905 89.1204 14.2958C91.1627 14.7288 93.1836 15.1518 95.1829 15.5649C95.2229 15.5734 95.2683 15.5965 95.3191 15.6343C95.3561 15.6626 95.3977 15.6814 95.4435 15.6909L106.222 17.8557C106.263 17.864 106.299 17.8859 106.325 17.9175C106.35 17.949 106.364 17.9881 106.363 18.0284C106.215 22.9409 103.309 27.3442 98.1132 28.3644C95.5211 28.8736 92.2073 28.4903 90.0718 26.8773C86.1887 23.9456 86.9293 18.0425 88.9901 14.3538ZM94.1071 23.0343C93.4251 23.0654 92.7415 23.0984 92.0565 23.1334C91.8048 23.1476 91.6935 23.2735 91.6979 23.5054C91.699 23.5518 91.7233 23.5758 91.7711 23.5777L99.0661 23.8536C99.0845 23.854 99.103 23.8509 99.1201 23.8444C99.1371 23.8377 99.1526 23.828 99.1656 23.8154L100.196 22.815C100.256 22.7575 100.243 22.7306 100.158 22.7344L98.2815 22.8221C98.2161 22.8249 98.205 22.8027 98.2479 22.7556C98.6167 22.3491 98.9193 21.8991 99.1554 21.4058C99.1846 21.3445 99.2334 21.3213 99.3017 21.3364L100.935 21.7142C100.993 21.7274 101.046 21.717 101.095 21.6831L102.699 20.5285C102.762 20.4833 102.755 20.455 102.677 20.4437L89.3897 18.6297C89.3419 18.623 89.318 18.6434 89.318 18.6906V18.9353C89.318 19.0079 89.3546 19.0523 89.4278 19.0683L93.3387 19.9682C93.3816 19.9785 93.405 20.0045 93.409 20.0461C93.4968 20.9757 93.3299 22.3084 94.1247 22.9835C94.1617 23.0146 94.1559 23.0315 94.1071 23.0343Z" fill="#FDAB0F" className="frame-end"/>
                    <path d="M107.802 28.1726L110.885 11.0148C114.014 10.0493 117.097 9.56662 120.045 9.56662C121.677 9.56662 122.991 10.0493 123.989 11.0148C126.029 10.0493 128.07 9.56662 130.11 9.56662C135.007 9.56662 137.592 11.7168 136.684 16.5877L134.599 28.1724H128.705L130.473 18.3429C130.971 15.666 130.155 14.3059 128.115 14.3059C127.525 14.3059 126.755 14.4814 125.894 14.8324C126.12 15.9295 126.075 17.202 125.848 18.6941L124.125 28.1726H118.231L119.999 18.3429C120.498 15.5787 119.954 14.306 118.095 14.306C117.506 14.306 116.825 14.3938 116.145 14.5254L113.697 28.1726H107.802Z" fill="#FDAB0F"/>
                  </g>
                  <defs>
                    <clipPath id="clip0_9_34">
                      <rect width="137" height="40" fill="white"/>
                    </clipPath>
                  </defs>
                </svg>
              </Link>
            </div>

            {/* Desktop Navigation Menu */}
            <nav className="hidden lg:flex items-center space-x-6">
              {navItems.map((item) => {
                const isActive = location.pathname === item.href;
                
                if (item.onClick) {
                  return (
                    <button
                      key={item.name}
                      onClick={item.onClick}
                      className="flex items-center space-x-2 text-sm text-white hover:text-orange-400 transition-colors px-3 py-2"
                    >
                      <span className="w-5 h-5">{item.icon}</span>
                      <span>{item.name}</span>
                    </button>
                  );
                }
                
                return (
                  <Link
                    key={item.name}
                    to={item.href}
                    className={`flex items-center space-x-2 text-sm px-3 py-2 transition-colors ${
                      isActive 
                        ? 'text-orange-400 border-b-2 border-orange-400 pb-1' 
                        : 'text-white hover:text-orange-400'
                    }`}
                  >
                    <span className="w-5 h-5">{item.icon}</span>
                    <span>{item.name}</span>
                  </Link>
                );
              })}
            </nav>

            {/* Right Side - Login/Signup */}
            <div className="hidden lg:flex items-center space-x-4 relative">
              {user ? (
                <>
                  <Button variant="outline" size="sm" className="gap-2 border-slate-600 text-gray-300 hover:bg-slate-700">
                    <Wallet className="w-4 h-4" />
                    ₺1,250.00
                  </Button>
                  <Button variant="ghost" size="sm" className="text-gray-300 hover:text-white hover:bg-slate-700">
                    <Bell className="w-4 h-4" />
                  </Button>
                  <Button 
                    variant="ghost" 
                    size="sm"
                    className="text-gray-300 hover:text-white hover:bg-slate-700"
                    onClick={() => window.location.href = '/profile'}
                  >
                    <UserIcon className="w-4 h-4" />
                  </Button>
                  <Button 
                    variant="outline" 
                    size="sm" 
                    className="gap-2 border-slate-600 text-gray-300 hover:bg-slate-700"
                    onClick={handleLogout}
                  >
                    <LogOut className="w-4 h-4" />
                    Çıkış
                  </Button>
                </>
              ) : (
                <div className="flex items-center space-x-3">
                  <Button 
                    className="bg-red-600 hover:bg-red-700 text-white px-4 py-2 text-sm"
                    onClick={() => setIsLoginDropdownOpen(!isLoginDropdownOpen)}
                  >
                    Giriş
                  </Button>
                  <Button 
                    className="bg-green-600 hover:bg-green-700 text-white px-4 py-2 text-sm"
                    onClick={() => setIsRegistrationModalOpen(true)}
                  >
                    Üye Ol
                  </Button>
                  
                  {/* Login Dropdown */}
                  {isLoginDropdownOpen && (
                    <div className="absolute top-full right-0 mt-2 w-80 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-50">
                      <div className="p-6">
                        <div className="mb-4">
                          <h3 className="text-white font-semibold mb-2">Sosyal medya hesabı ile giriş yap</h3>
                          <div className="space-y-2">
                            <Button className="w-full bg-blue-600 hover:bg-blue-700 text-white flex items-center justify-center space-x-2">
                              <svg xmlns="http://www.w3.org/2000/svg" className="w-5 h-5" viewBox="0 0 56.29412 56.2941">
                                <path d="M28.147,56.2941A28.14705,28.14705,0,1,0,0,28.1471,28.1471,28.1471,0,0,0,28.147,56.2941Z" fill="#3b5998"/>
                                <path d="M35.22382,29.2489h-5.0225V47.649h-7.6095V29.2489h-3.6191V22.7824h3.6191V18.5978c0-2.9924,1.4215-7.6782,7.6773-7.6782l5.6366.0235V17.22H31.816a1.549,1.549,0,0,0-1.6142,1.7626v3.8058h5.6869Z" fill="#fff"/>
                              </svg>
                              <span>Facebook</span>
                            </Button>
                            <Button className="w-full bg-red-600 hover:bg-red-700 text-white flex items-center justify-center space-x-2">
                              <svg xmlns="http://www.w3.org/2000/svg" className="w-5 h-5" viewBox="0 0 56.29411 56.29408">
                                <path d="M28.14711,56.29408A28.147,28.147,0,1,0,0,28.14708,28.147,28.147,0,0,0,28.14711,56.29408Z" fill="#dc4e41"/>
                                <path d="M9.79981,29.408a11.59937,11.59937,0,0,0,7.8243,10.9717c4.322,1.452,9.636.3658,12.5121-3.3356,2.09979-2.5936,2.57689-6.0511,2.34969-9.2814-3.70139-.0331-7.4028-.022-11.0987-.0165-.006,1.3186,0,2.6321.00551,3.9507,2.2162.0612,4.4329.0332,6.64919.0778a6.4117,6.4117,0,0,1-3.7682,4.3938,7.33022,7.33022,0,1,1-4.93719-13.792c2.3773-.8364,4.82639.1053,6.86039,1.3411,1.0306-.9643,1.995-1.9949,2.94231-3.0365A11.667,11.667,0,0,0,9.79981,29.408Z" fill="#dc4e41"/>
                                <path d="M39.6898,24.42008c-.011,1.1028-.02259,2.2112-.0281,3.3135-1.10829.0111-2.2107.0166-3.31349.0221v3.3025c1.10279.0055,2.2112.011,3.31349.0226.01111,1.10279.01111,2.2052.0221,3.3135,1.0973,0,2.20021-.00551,3.3025,0,.006-1.1083.011-2.21071.0226-3.319,1.10231-.0056,2.2107-.0111,3.31351-.0166v-3.3025c-1.10231-.0055-2.2107-.011-3.31351-.0221-.006-1.1028-.01659-2.2112-.0226-3.3135Q41.33287,24.41983,39.6898,24.42008Z" fill="#dc4e41"/>
                                <path d="M9.79981,29.40748a11.66663,11.66663,0,0,1,19.3389-8.7274c-.94781,1.0421-1.91221,2.0722-2.9423,3.0366-2.034-1.2358-4.48311-2.1776-6.8604-1.3412a7.33022,7.33022,0,1,0,4.93719,13.792,6.41292,6.41292,0,0,0,3.7682-4.3938c-2.21629-.0441-4.433-.0165-6.64919-.0777-.0055-1.3186-.011-2.6322-.0055-3.9508,3.6959-.0055,7.3973-.0166,11.09869.0166.2272,3.2307-.2494,6.6883-2.34969,9.2813-2.8761,3.7014-8.1896,4.7877-12.5121,3.3356A11.599,11.599,0,0,1,9.79981,29.40748Z" fill="#fff"/>
                                <path d="M39.6898,24.42008h3.2965c.006,1.1028.01661,2.2112.0226,3.3135,1.10231.011,2.2107.0166,3.31351.0221v3.3025c-1.10231.0055-2.2107.011-3.31351.0165-.01109,1.10839-.01659,2.2107-.0226,3.3191-1.10229-.0055-2.20569,0-3.3025,0-.01049-1.1084-.01049-2.21071-.0221-3.3135-1.10229-.0116-2.2107-.0166-3.31349-.0226v-3.3025q1.65418-.00825,3.31349-.0221C39.66721,26.63128,39.67831,25.52288,39.6898,24.42008Z" fill="#fff"/>
                              </svg>
                              <span>Google+</span>
                            </Button>
                          </div>
                        </div>
                        
                        <form className="space-y-4">
                          <div>
                            <input
                              type="email"
                              placeholder="Email"
                              className="w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-gray-400 focus:outline-none focus:border-orange-400"
                            />
                          </div>
                          <div>
                            <input
                              type="password"
                              placeholder="Casibom Şifreniz"
                              className="w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-white placeholder-gray-400 focus:outline-none focus:border-orange-400"
                            />
                          </div>
                          <Button 
                            type="submit" 
                            className="w-full bg-red-600 hover:bg-red-700 text-white"
                          >
                            Giriş
                          </Button>
                          <Button 
                            type="button" 
                            variant="link" 
                            className="w-full text-orange-400 hover:text-orange-300"
                          >
                            Şifrenizi mi unuttunuz?
                          </Button>
                        </form>
                      </div>
                      <div 
                        className="fixed inset-0 z-40"
                        onClick={() => setIsLoginDropdownOpen(false)}
                      />
                    </div>
                  )}
                </div>
              )}
            </div>

            {/* Mobile Menu Button */}
            <Button
              variant="ghost"
              size="sm"
              className="lg:hidden text-white hover:text-orange-400"
              onClick={() => setIsMenuOpen(!isMenuOpen)}
            >
              {isMenuOpen ? <X className="w-5 h-5" /> : <Menu className="w-5 h-5" />}
            </Button>
          </div>
        </div>

        {/* Game Categories - Desktop Only */}
        <div className="border-t border-slate-700 hidden lg:block">
          <div className="container mx-auto px-4">
            <div className="flex items-center justify-between h-12">
              <div className="flex items-center space-x-8">
                <Button variant="ghost" className="text-sm hover:bg-white/5 text-muted-foreground hover:text-white">
                  🎰 Slot Oyunları
                </Button>
                <Button variant="ghost" className="text-sm hover:bg-white/5 text-muted-foreground hover:text-white">
                  🃏 Masa Oyunları
                </Button>
                <Button variant="ghost" className="text-sm hover:bg-white/5 text-muted-foreground hover:text-white">
                  🎲 Canlı Casino
                </Button>
                <Button variant="ghost" className="text-sm hover:bg-white/5 text-muted-foreground hover:text-white">
                  🎯 Jackpot
                </Button>
                <Button variant="ghost" className="text-sm hover:bg-white/5 text-muted-foreground hover:text-white">
                  🎮 Sanal Sporlar
                </Button>
              </div>
              
              <Button variant="ghost" className="text-muted-foreground hover:text-white text-sm">
                🔍 Ara
              </Button>
            </div>
          </div>
        </div>

        {/* Mobile Menu */}
        {isMenuOpen && (
          <div className="lg:hidden py-4 space-y-4 border-t border-slate-700">
            <nav className="px-4 space-y-3">
              {navItems.map((item) => {
                const isActive = location.pathname === item.href;
                
                if (item.onClick) {
                  return (
                    <button
                      key={item.name}
                      onClick={() => {
                        item.onClick?.();
                        setIsMenuOpen(false);
                      }}
                      className="flex items-center space-x-3 w-full text-left text-sm text-white hover:text-orange-400 transition-colors py-2"
                    >
                      <span className="w-5 h-5">{item.icon}</span>
                      <span>{item.name}</span>
                    </button>
                  );
                }
                
                return (
                  <Link
                    key={item.name}
                    to={item.href}
                    className={`flex items-center space-x-3 text-sm py-2 transition-colors ${
                      isActive ? 'text-orange-400' : 'text-white hover:text-orange-400'
                    }`}
                    onClick={() => setIsMenuOpen(false)}
                  >
                    <span className="w-5 h-5">{item.icon}</span>
                    <span>{item.name}</span>
                  </Link>
                );
              })}
            </nav>
            
            {/* Mobile Game Categories */}
            <div className="px-4 pt-4 border-t border-slate-700 space-y-2">
              <h4 className="text-orange-400 font-semibold text-sm">Oyun Kategorileri</h4>
              <div className="space-y-1">
                <Button variant="ghost" className="w-full justify-start text-sm hover:bg-white/5 text-muted-foreground hover:text-white">
                  🎰 Slot Oyunları
                </Button>
                <Button variant="ghost" className="w-full justify-start text-sm hover:bg-white/5 text-muted-foreground hover:text-white">
                  🃏 Masa Oyunları
                </Button>
                <Button variant="ghost" className="w-full justify-start text-sm hover:bg-white/5 text-muted-foreground hover:text-white">
                  🎲 Canlı Casino
                </Button>
                <Button variant="ghost" className="w-full justify-start text-sm hover:bg-white/5 text-muted-foreground hover:text-white">
                  🎯 Jackpot
                </Button>
                <Button variant="ghost" className="w-full justify-start text-sm hover:bg-white/5 text-muted-foreground hover:text-white">
                  🎮 Sanal Sporlar
                </Button>
              </div>
            </div>
            
            <div className="px-4 pt-4 border-t border-slate-700 space-y-3">
              {user ? (
                <>
                  <Button variant="outline" className="w-full gap-2 border-slate-600 text-gray-300">
                    <Wallet className="w-4 h-4" />
                    Bakiye: ₺1,250.00
                  </Button>
                  <div className="flex space-x-2">
                    <Button variant="ghost" className="flex-1 text-gray-300">
                      <Bell className="w-4 h-4" />
                    </Button>
                    <Button 
                      variant="ghost" 
                      className="flex-1 text-gray-300"
                      onClick={() => window.location.href = '/profile'}
                    >
                      <UserIcon className="w-4 h-4" />
                    </Button>
                  </div>
                  <Button 
                    variant="outline" 
                    className="w-full gap-2 border-slate-600 text-gray-300"
                    onClick={handleLogout}
                  >
                    <LogOut className="w-4 h-4" />
                    Çıkış Yap
                  </Button>
                </>
              ) : (
                <div className="space-y-2">
                  <Button 
                    className="w-full bg-red-600 hover:bg-red-700 text-white"
                    onClick={() => setIsLoginModalOpen(true)}
                  >
                    Giriş Yap
                  </Button>
                  <Button 
                    className="w-full bg-green-600 hover:bg-green-700 text-white"
                    onClick={() => setIsRegistrationModalOpen(true)}
                  >
                    Üye Ol
                  </Button>
                </div>
              )}
            </div>
          </div>
        )}
      </header>

      <RegistrationModal 
        isOpen={isRegistrationModalOpen}
        onClose={() => setIsRegistrationModalOpen(false)}
      />
      
      <LoginModal 
        isOpen={isLoginModalOpen}
        onClose={() => setIsLoginModalOpen(false)}
        onLoginSuccess={handleLoginSuccess}
      />
    </div>
  );
};

export default Header;